<app-siderbar></app-siderbar>

<div class="main-content">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10 col-xl-8">
        <!-- Header -->
        <div class="header mt-md-5">
          <div class="header-body">
            <div class="row align-items-center">
              <div class="col">
                <!-- Pretitle -->
                <h6 class="header-pretitle">MÃ³dulo</h6>

                <!-- Title -->
                <h1 class="header-title">Productos</h1>
              </div>
            </div>
            <!-- / .row -->
          </div>
        </div>

        <!-- Alert -->

        <ng-container>
          <!-- Card -->
          <div *ngIf="producto != undefined" class="card">
            <div class="card-header">
              <!-- Title -->
              <h4 class="card-header-title">Variedades de productos</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-12">
                  <form
                    #inventarioForm="ngForm"
                    (ngSubmit)="registro_inventario(inventarioForm)"
                    class="form-inline"
                  >
                    <label class="sr-only">Cantidad</label>
                    <input
                      required
                      class="form-control mb-3 mr-sm-4"
                      type="text"
                      placeholder="Cantidad"
                      name="cantidad"
                      [(ngModel)]="inventario.cantidad"
                    />
                    <label class="sr-only">Proveedor</label>
                    <input
                      required
                      class="form-control mb-3 mr-sm-4"
                      type="text"
                      placeholder="Proveedor"
                      name="proveedor"
                      [(ngModel)]="inventario.proveedor"
                    />
                    <button class="btn btn-primary mb-3 mr-3" type="submit">
                      Ingresar
                    </button>
                    <button
                      class="btn btn-success mb-3"
                      type="button"
                      (click)="donwload_excel()"
                    >
                      Exportar a excel
                    </button>
                  </form>
                </div>
                <div class="col-12">
                  <!--  <button class="btn btn-success" type="button" (click)="donwload_excel()">Exportar a excel</button> -->
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-bordered">
                  <thead class="thead-dark">
                    <tr>
                      <th>Admin</th>
                      <th>Cantidad</th>
                      <th>Proveedor</th>
                      <th>Opciones</th>
                    </tr>
                  </thead>
                  <ng-container *ngIf="inventarios.length == 0">
                    <tbody>
                      <tr>
                        <td colspan="4" class="text-center">
                          <span class="text-muted"
                            >Nohay registro de inventario</span
                          >
                        </td>
                      </tr>
                    </tbody>
                  </ng-container>
                  <ng-container>
                    <tbody *ngFor="let item of inventarios">
                      <tr>
                        <td>
                          {{ item.admin.nombres }} {{ item.admin.apellidos }}
                        </td>
                        <td>{{ item.cantidad }}</td>
                        <td>{{ item.proveedor }}</td>
                        <td>
                          <button
                            class="btn btn-danger btn-sm"
                            data-toggle="modal"
                            [attr.data-target]="'#delete-' + item._id"
                          >
                            <i class="fa fa-trash"></i>
                          </button>
                          <div
                            class="modal fade"
                            id="delete-{{ item._id }}"
                            tabindex="-1"
                            style="display: none"
                            aria-hidden="true"
                          >
                            <div
                              class="modal-dialog modal-dialog-centered"
                              role="document"
                            >
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h4 class="modal-title">Â¿EstÃ¡ seguro?</h4>
                                  <button
                                    class="close"
                                    type="button"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                  >
                                    <span aria-hidden="true">x</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <p>
                                    Desea eliminar este inventario? Â¡No podrÃ¡s
                                    revertir esto!
                                  </p>
                                </div>
                                <div class="modal-footer">
                                  <button
                                    class="btn btn-secondary btn-sm"
                                    type="button"
                                    data-dismiss="modal"
                                  >
                                    Cancelar
                                  </button>
                                  <button
                                    class="btn btn-primary btn-shadow btn-sm"
                                    type="button"
                                    (click)="eliminar(item._id)"
                                    *ngIf="!load_btn"
                                  >
                                    si, eliminar
                                  </button>
                                  <button
                                    *ngIf="load_btn"
                                    disabled
                                    type="button"
                                    class="btn btn-secondary"
                                  >
                                    <span
                                      class="spinner-grow spinner-grow-sm me-2"
                                      role="status"
                                      aria-hidden="true"
                                    ></span>
                                    Eliminando...
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </ng-container>
                </table>
              </div>
            </div>
          </div>
          <ng-container *ngIf="producto == undefined">
            <div class="card">
              <div class="card-body">
                <div class="row justify-content-center">
                  <div class="col-12 col-md-5 col-xl-4 my-5">
                    <div class="text-center">
                      <!-- Preheading -->
                      <h6 class="text-uppercase text-muted mb-4">404 error</h6>

                      <!-- Heading -->
                      <h1 class="display-4 mb-3">Thereâ€™s no page here ðŸ˜­</h1>

                      <!-- Subheading -->
                      <p class="text-muted mb-4">
                        Looks like you ended up here by accident?
                      </p>

                      <!-- Button -->
                      <a
                        [routerLink]="['/productos']"
                        class="btn btn-lg btn-primary"
                      >
                        Regresar a productos
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <!-- / .row -->
  </div>
</div>
